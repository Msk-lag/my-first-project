<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="student.management.Student.Management.Repository.StudentRepository">

    <!--受講生の全件検索 -->
    <select id="search" resultType="student.management.Student.Management.data.Student">
        SELECT * FROM students
    </select>

    <!--受講生の検索 -->
    <select id="searchStudent" resultType="student.management.Student.Management.data.Student">
        SELECT * FROM students WHERE id = #{id}
    </select>

    <!--受講生の条件検索 -->
    <select id="searchStudents" resultType="student.management.Student.Management.data.Student">
        SELECT * FROM students
        <where>
            <if test="fullName != null and fullName != ''">
                fullName LIKE CONCAT('%', #{fullName}, '%')
            </if>
            <if test="age != null">
                AND age = #{age}
            </if>
            <if test="gender != null and gender != ''">
                AND gender = #{gender}
            </if>
        </where>
    </select>

    <!--受講生情報を新規登録 -->
    <insert id="registerStudent">
        INSERT INTO students (
        id,
        fullName,
        furigana,
        nick_name,
        email,
        address,
        age,
        gender,
        remark,
        is_deleted
        )

        VALUES (
        #{id},
        #{fullName},
        #{furigana},
        #{nickName},
        #{email},
        #{address},
        #{age},
        #{gender},
        #{remark},
        false
        )

    </insert>


    <!--受講生を更新 -->
    <update id="updateStudent">
        UPDATE students SET
        fullName = #{fullName},
        furigana = #{furigana},
        nick_name = #{nickName},
        email = #{email},
        address = #{address},
        age = #{age},
        gender = #{gender},
        remark = #{remark},
        is_deleted = #{isDeleted}
        WHERE id = #{id}

    </update>


</mapper>